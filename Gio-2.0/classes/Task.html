

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>
    Gio.Task -
    
      Classes -
    
    Gio 2.0
  </title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/pgi.css" type="text/css" />
  

  
  <script type="text/javascript">

    function openSidebar(element) {
        window.location.href = element.href + location.hash;
        return false;
    }

    function inIframe() {
        try {
            return window.self !== window.top;
        } catch (e) {
            return true;
        }
    }

    function onLoaded() {
        if(!inIframe()) {
            var icons = document.getElementsByClassName('open-sidebar');

            for (var i = 0; i < icons.length; i ++) {
                icons[i].style.display = 'table-cell';
            }
        }
    }

    document.addEventListener('DOMContentLoaded', onLoaded, false);

  </script>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Gio 2.0 Python API Docs" href="../index.html"/>
        <link rel="up" title="Classes" href="../classes.html"/>
        <link rel="next" title="Gio.TcpConnection" href="TcpConnection.html"/>
        <link rel="prev" title="Gio.SubprocessLauncher" href="SubprocessLauncher.html"/> 
</head>

<body class="wy-body-for-nav" role="document">

<div class="non-fixed-bar">
<table class="navigation" summary="Navigation header" cellpadding="2" cellspacing="10" width="100%"><tbody><tr valign="middle">

<td class="open-sidebar" style="display:none"><a href="../../index.html#Gio-2.0/classes/Task.html" onclick="return openSidebar(this);"><i class="fa fa-search"></i></a></td>

<td class="shortcuts" align="left" width="100%">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Gio 2.0</a> &raquo;</li>
      
          <li><a href="../classes.html">Classes</a> &raquo;</li>
      
    <li>Gio.Task</li>
  </ul>
</td>
<td><a accesskey="h" href="../index.html"><i class="fa fa-home"></i></a></td>


<td><a accesskey="u" href="../classes.html"><i class="fa fa-chevron-up"></i></a></td>



<td><a accesskey="p" href="SubprocessLauncher.html"><i class="fa fa-chevron-left"></i></a></td>



<td><a accesskey="n" href="TcpConnection.html"><i class="fa fa-chevron-right"></i></a></td>


</tr></tbody>
</table>

<div class="local-toc">
    <ul>
<li><a class="reference internal" href="#">Gio.Task</a><ul>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#virtual-methods">Virtual Methods</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#class-details">Class Details</a></li>
<li><a class="reference internal" href="#property-details">Property Details</a></li>
</ul>
</li>
</ul>

</div>
</div>

<div class="fixed-bar">
  <table class="navigation" summary="Navigation header" cellpadding="2" cellspacing="10" width="100%"><tbody><tr valign="middle">

<td class="open-sidebar" style="display:none"><a href="../../index.html#Gio-2.0/classes/Task.html" onclick="return openSidebar(this);"><i class="fa fa-search"></i></a></td>

<td class="shortcuts" align="left" width="100%">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Gio 2.0</a> &raquo;</li>
      
          <li><a href="../classes.html">Classes</a> &raquo;</li>
      
    <li>Gio.Task</li>
  </ul>
</td>
<td><a accesskey="h" href="../index.html"><i class="fa fa-home"></i></a></td>


<td><a accesskey="u" href="../classes.html"><i class="fa fa-chevron-up"></i></a></td>



<td><a accesskey="p" href="SubprocessLauncher.html"><i class="fa fa-chevron-left"></i></a></td>



<td><a accesskey="n" href="TcpConnection.html"><i class="fa fa-chevron-right"></i></a></td>


</tr></tbody>
</table>

<div class="local-toc">
    <ul>
<li><a class="reference internal" href="#">Gio.Task</a><ul>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#virtual-methods">Virtual Methods</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#class-details">Class Details</a></li>
<li><a class="reference internal" href="#property-details">Property Details</a></li>
</ul>
</li>
</ul>

</div>
</div>

  <div class="wy-grid-for-nav">

    

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="main">
            
  <section id="gio-task">
<h1>Gio.Task<a class="headerlink" href="#gio-task" title="Permalink to this headline">¶</a></h1>
<p class="graphviz">
<svg width="198pt" height="134pt"
 viewBox="0.00 0.00 198.00 134.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 130)">
<title>g</title>
<!-- GObject.GInterface -->
<g id="node1" class="node">
<title>GObject.GInterface</title>
<g id="a_node1"><a xlink:href="../../GObject-2.0/classes/GInterface.html#GObject.GInterface" xlink:title="GObject.GInterface">
<path fill="none" stroke="#3091d1" d="M92,-126C92,-126 6,-126 6,-126 3,-126 0,-123 0,-120 0,-120 0,-114 0,-114 0,-111 3,-108 6,-108 6,-108 92,-108 92,-108 95,-108 98,-111 98,-114 98,-114 98,-120 98,-120 98,-123 95,-126 92,-126"/>
<text text-anchor="middle" x="49" y="-114.7" font-family="inherit" font-size="8.50">GObject.GInterface</text>
</a>
</g>
</g>
<!-- Gio.AsyncResult -->
<g id="node3" class="node">
<title>Gio.AsyncResult</title>
<g id="a_node3"><a xlink:href="AsyncResult.html#Gio.AsyncResult" xlink:title="Gio.AsyncResult">
<path fill="none" stroke="#3091d1" d="M85.5,-72C85.5,-72 12.5,-72 12.5,-72 9.5,-72 6.5,-69 6.5,-66 6.5,-66 6.5,-60 6.5,-60 6.5,-57 9.5,-54 12.5,-54 12.5,-54 85.5,-54 85.5,-54 88.5,-54 91.5,-57 91.5,-60 91.5,-60 91.5,-66 91.5,-66 91.5,-69 88.5,-72 85.5,-72"/>
<text text-anchor="middle" x="49" y="-60.7" font-family="inherit" font-size="8.50">Gio.AsyncResult</text>
</a>
</g>
</g>
<!-- GObject.GInterface&#45;&gt;Gio.AsyncResult -->
<g id="edge1" class="edge">
<title>GObject.GInterface&#45;&gt;Gio.AsyncResult</title>
<path fill="none" stroke="black" stroke-width="0.5" d="M49,-107.88C49,-99.76 49,-87.13 49,-77.5"/>
<polygon fill="black" stroke="black" stroke-width="0.5" points="50.75,-77.24 49,-72.24 47.25,-77.24 50.75,-77.24"/>
</g>
<!-- GObject.Object -->
<g id="node2" class="node">
<title>GObject.Object</title>
<g id="a_node2"><a xlink:href="../../GObject-2.0/classes/Object.html#GObject.Object" xlink:title="GObject.Object">
<path fill="none" stroke="#75507b" d="M184,-72C184,-72 116,-72 116,-72 113,-72 110,-69 110,-66 110,-66 110,-60 110,-60 110,-57 113,-54 116,-54 116,-54 184,-54 184,-54 187,-54 190,-57 190,-60 190,-60 190,-66 190,-66 190,-69 187,-72 184,-72"/>
<text text-anchor="middle" x="150" y="-60.7" font-family="inherit" font-size="8.50">GObject.Object</text>
</a>
</g>
</g>
<!-- Gio.Task -->
<g id="node4" class="node">
<title>Gio.Task</title>
<g id="a_node4"><a xlink:href="#Gio.Task" xlink:title="Gio.Task">
<path fill="none" stroke="#75507b" d="M120,-18C120,-18 78,-18 78,-18 75,-18 72,-15 72,-12 72,-12 72,-6 72,-6 72,-3 75,0 78,0 78,0 120,0 120,0 123,0 126,-3 126,-6 126,-6 126,-12 126,-12 126,-15 123,-18 120,-18"/>
<text text-anchor="middle" x="99" y="-6.7" font-family="inherit" font-size="8.50">Gio.Task</text>
</a>
</g>
</g>
<!-- GObject.Object&#45;&gt;Gio.Task -->
<g id="edge2" class="edge">
<title>GObject.Object&#45;&gt;Gio.Task</title>
<path fill="none" stroke="black" stroke-width="0.5" d="M142.03,-53.88C133.62,-45.3 120.28,-31.7 110.69,-21.91"/>
<polygon fill="black" stroke="black" stroke-width="0.5" points="111.83,-20.58 107.08,-18.24 109.33,-23.03 111.83,-20.58"/>
</g>
<!-- Gio.AsyncResult&#45;&gt;Gio.Task -->
<g id="edge3" class="edge">
<title>Gio.AsyncResult&#45;&gt;Gio.Task</title>
<path fill="none" stroke="black" stroke-width="0.5" d="M56.81,-53.88C65.06,-45.3 78.13,-31.7 87.54,-21.91"/>
<polygon fill="black" stroke="black" stroke-width="0.5" points="88.87,-23.06 91.08,-18.24 86.35,-20.63 88.87,-23.06"/>
</g>
</g>
</svg>
</p>
<dl class="field-list simple">
<dt class="field-odd">Subclasses</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<section id="methods">
<span id="gio-task-methods"></span><h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Inherited</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GObject-2.0/classes/Object.html#gobject-object-methods" title="(in GObject 2.0 v2.0)"><span class="xref std std-ref">GObject.Object (37)</span></a>,     <a class="reference internal" href="AsyncResult.html#gio-asyncresult-methods"><span class="std std-ref">Gio.AsyncResult (4)</span></a></p>
</dd>
<dt class="field-even">Structs</dt>
<dd class="field-even"><p><a class="reference external" href="../../GObject-2.0/classes/ObjectClass.html#gobject-objectclass-methods" title="(in GObject 2.0 v2.0)"><span class="xref std std-ref">GObject.ObjectClass (5)</span></a></p>
</dd>
</dl>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>class</em></p></td>
<td><p><a class="reference internal" href="#Gio.Task.is_valid" title="Gio.Task.is_valid"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_valid</span></code></a> (result, source_object)</p></td>
</tr>
<tr class="row-even"><td><p><em>class</em></p></td>
<td><p><a class="reference internal" href="#Gio.Task.new" title="Gio.Task.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">new</span></code></a> (source_object, cancellable, callback, *callback_data)</p></td>
</tr>
<tr class="row-odd"><td><p><em>class</em></p></td>
<td><p><a class="reference internal" href="#Gio.Task.report_error" title="Gio.Task.report_error"><code class="xref py py-func docutils literal notranslate"><span class="pre">report_error</span></code></a> (source_object, callback, callback_data, source_tag, error)</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_cancellable" title="Gio.Task.get_cancellable"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_cancellable</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_check_cancellable" title="Gio.Task.get_check_cancellable"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_check_cancellable</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_completed" title="Gio.Task.get_completed"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_completed</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_context" title="Gio.Task.get_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_context</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_name" title="Gio.Task.get_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_name</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_priority" title="Gio.Task.get_priority"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_priority</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_return_on_cancel" title="Gio.Task.get_return_on_cancel"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_return_on_cancel</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_source_object" title="Gio.Task.get_source_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_source_object</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_source_tag" title="Gio.Task.get_source_tag"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_source_tag</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.get_task_data" title="Gio.Task.get_task_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_task_data</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.had_error" title="Gio.Task.had_error"><code class="xref py py-func docutils literal notranslate"><span class="pre">had_error</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.propagate_boolean" title="Gio.Task.propagate_boolean"><code class="xref py py-func docutils literal notranslate"><span class="pre">propagate_boolean</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.propagate_int" title="Gio.Task.propagate_int"><code class="xref py py-func docutils literal notranslate"><span class="pre">propagate_int</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><code class="xref py py-func docutils literal notranslate"><span class="pre">propagate_pointer</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.propagate_value" title="Gio.Task.propagate_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">propagate_value</span></code></a> ()</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.return_boolean" title="Gio.Task.return_boolean"><code class="xref py py-func docutils literal notranslate"><span class="pre">return_boolean</span></code></a> (result)</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><code class="xref py py-func docutils literal notranslate"><span class="pre">return_error</span></code></a> (error)</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><code class="xref py py-func docutils literal notranslate"><span class="pre">return_error_if_cancelled</span></code></a> ()</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.return_int" title="Gio.Task.return_int"><code class="xref py py-func docutils literal notranslate"><span class="pre">return_int</span></code></a> (result)</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-func docutils literal notranslate"><span class="pre">return_pointer</span></code></a> (result, result_destroy)</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.return_value" title="Gio.Task.return_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">return_value</span></code></a> (result)</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_in_thread</span></code></a> (task_func)</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.run_in_thread_sync" title="Gio.Task.run_in_thread_sync"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_in_thread_sync</span></code></a> (task_func)</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_check_cancellable</span></code></a> (check_cancellable)</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.set_name" title="Gio.Task.set_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_name</span></code></a> (name)</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.set_priority" title="Gio.Task.set_priority"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_priority</span></code></a> (priority)</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_return_on_cancel</span></code></a> (return_on_cancel)</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.set_source_tag" title="Gio.Task.set_source_tag"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_source_tag</span></code></a> (source_tag)</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_task_data</span></code></a> (task_data, task_data_destroy)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="virtual-methods">
<span id="gio-task-vfuncs"></span><h2>Virtual Methods<a class="headerlink" href="#virtual-methods" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Inherited</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GObject-2.0/classes/Object.html#gobject-object-vfuncs" title="(in GObject 2.0 v2.0)"><span class="xref std std-ref">GObject.Object (7)</span></a>,     <a class="reference internal" href="AsyncResult.html#gio-asyncresult-vfuncs"><span class="std std-ref">Gio.AsyncResult (3)</span></a></p>
</dd>
</dl>
</section>
<section id="properties">
<span id="gio-task-props"></span><h2>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 97%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Flags</p></th>
<th class="head"><p>Short Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#Gio.Task.props.completed" title="Gio.Task.props.completed"><code class="xref py py-data docutils literal notranslate"><span class="pre">completed</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Whether the task has completed yet</p></td>
</tr>
</tbody>
</table>
</section>
<section id="signals">
<span id="gio-task-signals"></span><h2>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Inherited</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GObject-2.0/classes/Object.html#gobject-object-signals" title="(in GObject 2.0 v2.0)"><span class="xref std std-ref">GObject.Object (1)</span></a></p>
</dd>
</dl>
</section>
<section id="fields">
<span id="gio-task-fields"></span><h2>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Inherited</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GObject-2.0/classes/Object.html#gobject-object-fields" title="(in GObject 2.0 v2.0)"><span class="xref std std-ref">GObject.Object (1)</span></a></p>
</dd>
</dl>
</section>
<section id="class-details">
<h2>Class Details<a class="headerlink" href="#class-details" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="Gio.Task">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Gio.</span></span><span class="sig-name descname"><span class="pre">Task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Gio.Task" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Bases</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.Object</span></code></a>,         <a class="reference internal" href="AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gio.AsyncResult</span></code></a></p>
</dd>
<dt class="field-even">Abstract</dt>
<dd class="field-even"><p>No</p>
</dd>
<dt class="field-odd">Structure</dt>
<dd class="field-odd"><p><a class="reference internal" href="TaskClass.html#Gio.TaskClass" title="Gio.TaskClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gio.TaskClass</span></code></a></p>
</dd>
</dl>
<p>A <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> represents and manages a cancellable “task”.</p>
<dl class="simple">
<dt>Asynchronous operations</dt><dd></dd>
</dl>
<p>The most common usage of <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> is as a <a class="reference internal" href="AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult</span></code></a>, to
manage data during an asynchronous operation. You call
<a class="reference internal" href="#Gio.Task.new" title="Gio.Task.new"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.new</span></code></a>() in the “start” method, followed by
<a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_task_data</span></code></a>() and the like if you need to keep some
additional data associated with the task, and then pass the
task object around through your asynchronous operation.
Eventually, you will call a method such as
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>() or <a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error</span></code></a>(), which will
save the value you give it and then invoke the task’s callback
function in the
<a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext.push_thread_default" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">thread-default</span> <span class="pre">main</span> <span class="pre">context</span></code></a>
where it was created (waiting until the next iteration of the main
loop first, if necessary). The caller will pass the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> back to
the operation’s finish function (as a <a class="reference internal" href="AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult</span></code></a>), and you can
use <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.propagate_pointer</span></code></a>() or the like to extract the
return value.</p>
<p>Using <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> requires the thread-default <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a> from when the
<a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> was constructed to be running at least until the task has completed
and its data has been freed.</p>
<p>Here is an example for using <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> as a <a class="reference internal" href="AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult</span></code></a>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">CakeFrostingType</span><span class="w"> </span><span class="n">frosting</span><span class="p">;</span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">DecorationData</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">decoration_data_free</span><span class="w"> </span><span class="p">(</span><span class="n">DecorationData</span><span class="w"> </span><span class="o">*</span><span class="n">decoration</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">g_free</span><span class="w"> </span><span class="p">(</span><span class="n">decoration</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_slice_free</span><span class="w"> </span><span class="p">(</span><span class="n">DecorationData</span><span class="p">,</span><span class="w"> </span><span class="n">decoration</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">baked_cb</span><span class="w"> </span><span class="p">(</span><span class="n">Cake</span><span class="w">     </span><span class="o">*</span><span class="n">cake</span><span class="p">,</span>
<span class="w">          </span><span class="n">gpointer</span><span class="w">  </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">DecorationData</span><span class="w"> </span><span class="o">*</span><span class="n">decoration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_get_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">  </span><span class="n">GError</span><span class="w"> </span><span class="o">*</span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">g_task_return_new_error</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">BAKER_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">BAKER_ERROR_NO_FLOUR</span><span class="p">,</span>
<span class="w">                               </span><span class="s">&quot;Go to the supermarket&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cake_decorate</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">,</span><span class="w"> </span><span class="n">decoration</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span><span class="w"> </span><span class="n">decoration</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// g_task_return_error() takes ownership of error</span>
<span class="w">      </span><span class="n">g_task_return_error</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="n">g_task_return_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">cake</span><span class="p">,</span><span class="w"> </span><span class="n">g_object_unref</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">baker_bake_cake_async</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">               </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                       </span><span class="n">guint</span><span class="w">                </span><span class="n">radius</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFlavor</span><span class="w">           </span><span class="n">flavor</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFrostingType</span><span class="w">     </span><span class="n">frosting</span><span class="p">,</span>
<span class="w">                       </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w">          </span><span class="o">*</span><span class="n">message</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GCancellable</span><span class="w">        </span><span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GAsyncReadyCallback</span><span class="w">  </span><span class="n">callback</span><span class="p">,</span>
<span class="w">                       </span><span class="n">gpointer</span><span class="w">             </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="p">;</span>
<span class="w">  </span><span class="n">DecorationData</span><span class="w"> </span><span class="o">*</span><span class="n">decoration</span><span class="p">;</span>
<span class="w">  </span><span class="n">Cake</span><span class="w">  </span><span class="o">*</span><span class="n">cake</span><span class="p">;</span>

<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_new</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"> </span><span class="n">user_data</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">radius</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">g_task_return_new_error</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">BAKER_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">BAKER_ERROR_TOO_SMALL</span><span class="p">,</span>
<span class="w">                               </span><span class="s">&quot;%ucm radius cakes are silly&quot;</span><span class="p">,</span>
<span class="w">                               </span><span class="n">radius</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="n">cake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_baker_get_cached_cake</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">,</span><span class="w"> </span><span class="n">flavor</span><span class="p">,</span><span class="w"> </span><span class="n">frosting</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// _baker_get_cached_cake() returns a reffed cake</span>
<span class="w">      </span><span class="n">g_task_return_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">cake</span><span class="p">,</span><span class="w"> </span><span class="n">g_object_unref</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="n">decoration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_slice_new</span><span class="w"> </span><span class="p">(</span><span class="n">DecorationData</span><span class="p">);</span>
<span class="w">  </span><span class="n">decoration</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frosting</span><span class="p">;</span>
<span class="w">  </span><span class="n">decoration</span><span class="o">-&gt;</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_strdup</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">decoration</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span><span class="w"> </span><span class="n">decoration_data_free</span><span class="p">);</span>

<span class="w">  </span><span class="n">_baker_begin_cake</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">,</span><span class="w"> </span><span class="n">flavor</span><span class="p">,</span><span class="w"> </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="n">baked_cb</span><span class="p">,</span><span class="w"> </span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span><span class="w"> </span><span class="o">*</span>
<span class="nf">baker_bake_cake_finish</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">         </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                        </span><span class="n">GAsyncResult</span><span class="w">  </span><span class="o">*</span><span class="n">result</span><span class="p">,</span>
<span class="w">                        </span><span class="n">GError</span><span class="w">       </span><span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">g_return_val_if_fail</span><span class="w"> </span><span class="p">(</span><span class="n">g_task_is_valid</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">g_task_propagate_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">G_TASK</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">),</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Chained asynchronous operations</dt><dd></dd>
</dl>
<p><a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> also tries to simplify asynchronous operations that
internally chain together several smaller asynchronous
operations. <a class="reference internal" href="#Gio.Task.get_cancellable" title="Gio.Task.get_cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.get_cancellable</span></code></a>(), <a class="reference internal" href="#Gio.Task.get_context" title="Gio.Task.get_context"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.get_context</span></code></a>(),
and <a class="reference internal" href="#Gio.Task.get_priority" title="Gio.Task.get_priority"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.get_priority</span></code></a>() allow you to get back the task’s
<a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a>, <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a>, and <a class="reference external" href="https://developer.gnome.org/gio/stable/GAsyncResult.html#io-priority">I/O priority</a>
when starting a new subtask, so you don’t have to keep track
of them yourself. g_task_attach_source() simplifies the case
of waiting for a source to fire (automatically using the correct
<a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a> and priority).</p>
<p>Here is an example for chained asynchronous operations:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Cake</span><span class="w"> </span><span class="o">*</span><span class="n">cake</span><span class="p">;</span>
<span class="w">  </span><span class="n">CakeFrostingType</span><span class="w"> </span><span class="n">frosting</span><span class="p">;</span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">BakingData</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">decoration_data_free</span><span class="w"> </span><span class="p">(</span><span class="n">BakingData</span><span class="w"> </span><span class="o">*</span><span class="n">bd</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span><span class="p">)</span>
<span class="w">    </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_free</span><span class="w"> </span><span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_slice_free</span><span class="w"> </span><span class="p">(</span><span class="n">BakingData</span><span class="p">,</span><span class="w"> </span><span class="n">bd</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">decorated_cb</span><span class="w"> </span><span class="p">(</span><span class="n">Cake</span><span class="w">         </span><span class="o">*</span><span class="n">cake</span><span class="p">,</span>
<span class="w">              </span><span class="n">GAsyncResult</span><span class="w"> </span><span class="o">*</span><span class="n">result</span><span class="p">,</span>
<span class="w">              </span><span class="n">gpointer</span><span class="w">      </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">GError</span><span class="w"> </span><span class="o">*</span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cake_decorate_finish</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_task_return_error</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// baking_data_free() will drop its ref on the cake, so we have to</span>
<span class="w">  </span><span class="c1">// take another here to give to the caller.</span>
<span class="w">  </span><span class="n">g_task_return_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">g_object_ref</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">),</span><span class="w"> </span><span class="n">g_object_unref</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="n">gboolean</span>
<span class="nf">decorator_ready</span><span class="w"> </span><span class="p">(</span><span class="n">gpointer</span><span class="w"> </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">BakingData</span><span class="w"> </span><span class="o">*</span><span class="n">bd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_get_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>

<span class="w">  </span><span class="n">cake_decorate_async</span><span class="w"> </span><span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span><span class="p">,</span><span class="w"> </span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span><span class="w"> </span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span>
<span class="w">                       </span><span class="n">g_task_get_cancellable</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">),</span>
<span class="w">                       </span><span class="n">decorated_cb</span><span class="p">,</span><span class="w"> </span><span class="n">task</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">G_SOURCE_REMOVE</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">baked_cb</span><span class="w"> </span><span class="p">(</span><span class="n">Cake</span><span class="w">     </span><span class="o">*</span><span class="n">cake</span><span class="p">,</span>
<span class="w">          </span><span class="n">gpointer</span><span class="w">  </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">BakingData</span><span class="w"> </span><span class="o">*</span><span class="n">bd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_get_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">  </span><span class="n">GError</span><span class="w"> </span><span class="o">*</span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">g_task_return_new_error</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">BAKER_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">BAKER_ERROR_NO_FLOUR</span><span class="p">,</span>
<span class="w">                               </span><span class="s">&quot;Go to the supermarket&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cake</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Bail out now if the user has already cancelled</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g_task_return_error_if_cancelled</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cake_decorator_available</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">))</span>
<span class="w">    </span><span class="n">decorator_ready</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">GSource</span><span class="w"> </span><span class="o">*</span><span class="n">source</span><span class="p">;</span>

<span class="w">      </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cake_decorator_wait_source_new</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// Attach @source to @task&#39;s GMainContext and have it call</span>
<span class="w">      </span><span class="c1">// decorator_ready() when it is ready.</span>
<span class="w">      </span><span class="n">g_task_attach_source</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">decorator_ready</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_source_unref</span><span class="w"> </span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">baker_bake_cake_async</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">               </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                       </span><span class="n">guint</span><span class="w">                </span><span class="n">radius</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFlavor</span><span class="w">           </span><span class="n">flavor</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFrostingType</span><span class="w">     </span><span class="n">frosting</span><span class="p">,</span>
<span class="w">                       </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w">          </span><span class="o">*</span><span class="n">message</span><span class="p">,</span>
<span class="w">                       </span><span class="n">gint</span><span class="w">                 </span><span class="n">priority</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GCancellable</span><span class="w">        </span><span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GAsyncReadyCallback</span><span class="w">  </span><span class="n">callback</span><span class="p">,</span>
<span class="w">                       </span><span class="n">gpointer</span><span class="w">             </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="p">;</span>
<span class="w">  </span><span class="n">BakingData</span><span class="w"> </span><span class="o">*</span><span class="n">bd</span><span class="p">;</span>

<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_new</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"> </span><span class="n">user_data</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_priority</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">priority</span><span class="p">);</span>

<span class="w">  </span><span class="n">bd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_slice_new0</span><span class="w"> </span><span class="p">(</span><span class="n">BakingData</span><span class="p">);</span>
<span class="w">  </span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frosting</span><span class="p">;</span>
<span class="w">  </span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_strdup</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">bd</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span><span class="w"> </span><span class="n">baking_data_free</span><span class="p">);</span>

<span class="w">  </span><span class="n">_baker_begin_cake</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">,</span><span class="w"> </span><span class="n">flavor</span><span class="p">,</span><span class="w"> </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="n">baked_cb</span><span class="p">,</span><span class="w"> </span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span><span class="w"> </span><span class="o">*</span>
<span class="nf">baker_bake_cake_finish</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">         </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                        </span><span class="n">GAsyncResult</span><span class="w">  </span><span class="o">*</span><span class="n">result</span><span class="p">,</span>
<span class="w">                        </span><span class="n">GError</span><span class="w">       </span><span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">g_return_val_if_fail</span><span class="w"> </span><span class="p">(</span><span class="n">g_task_is_valid</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">g_task_propagate_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">G_TASK</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">),</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Asynchronous operations from synchronous ones</dt><dd></dd>
</dl>
<p>You can use <a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread</span></code></a>() to turn a synchronous
operation into an asynchronous one, by running it in a thread.
When it completes, the result will be dispatched to the
<a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext.push_thread_default" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">thread-default</span> <span class="pre">main</span> <span class="pre">context</span></code></a>
where the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> was created.</p>
<p>Running a task in a thread:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">guint</span><span class="w"> </span><span class="n">radius</span><span class="p">;</span>
<span class="w">  </span><span class="n">CakeFlavor</span><span class="w"> </span><span class="n">flavor</span><span class="p">;</span>
<span class="w">  </span><span class="n">CakeFrostingType</span><span class="w"> </span><span class="n">frosting</span><span class="p">;</span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">CakeData</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">cake_data_free</span><span class="w"> </span><span class="p">(</span><span class="n">CakeData</span><span class="w"> </span><span class="o">*</span><span class="n">cake_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">g_free</span><span class="w"> </span><span class="p">(</span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_slice_free</span><span class="w"> </span><span class="p">(</span><span class="n">CakeData</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">bake_cake_thread</span><span class="w"> </span><span class="p">(</span><span class="n">GTask</span><span class="w">         </span><span class="o">*</span><span class="n">task</span><span class="p">,</span>
<span class="w">                  </span><span class="n">gpointer</span><span class="w">       </span><span class="n">source_object</span><span class="p">,</span>
<span class="w">                  </span><span class="n">gpointer</span><span class="w">       </span><span class="n">task_data</span><span class="p">,</span>
<span class="w">                  </span><span class="n">GCancellable</span><span class="w">  </span><span class="o">*</span><span class="n">cancellable</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">Baker</span><span class="w"> </span><span class="o">*</span><span class="n">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">source_object</span><span class="p">;</span>
<span class="w">  </span><span class="n">CakeData</span><span class="w"> </span><span class="o">*</span><span class="n">cake_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">Cake</span><span class="w"> </span><span class="o">*</span><span class="n">cake</span><span class="p">;</span>
<span class="w">  </span><span class="n">GError</span><span class="w"> </span><span class="o">*</span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">  </span><span class="n">cake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bake_cake</span><span class="w"> </span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">radius</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">flavor</span><span class="p">,</span>
<span class="w">                    </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span>
<span class="w">                    </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cake</span><span class="p">)</span>
<span class="w">    </span><span class="n">g_task_return_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">cake</span><span class="p">,</span><span class="w"> </span><span class="n">g_object_unref</span><span class="p">);</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">g_task_return_error</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">baker_bake_cake_async</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">               </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                       </span><span class="n">guint</span><span class="w">                </span><span class="n">radius</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFlavor</span><span class="w">           </span><span class="n">flavor</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFrostingType</span><span class="w">     </span><span class="n">frosting</span><span class="p">,</span>
<span class="w">                       </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w">          </span><span class="o">*</span><span class="n">message</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GCancellable</span><span class="w">        </span><span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GAsyncReadyCallback</span><span class="w">  </span><span class="n">callback</span><span class="p">,</span>
<span class="w">                       </span><span class="n">gpointer</span><span class="w">             </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">CakeData</span><span class="w"> </span><span class="o">*</span><span class="n">cake_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="p">;</span>

<span class="w">  </span><span class="n">cake_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_slice_new</span><span class="w"> </span><span class="p">(</span><span class="n">CakeData</span><span class="p">);</span>
<span class="w">  </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">radius</span><span class="p">;</span>
<span class="w">  </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">flavor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">flavor</span><span class="p">;</span>
<span class="w">  </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frosting</span><span class="p">;</span>
<span class="w">  </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_strdup</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_new</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"> </span><span class="n">user_data</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span><span class="w"> </span><span class="n">cake_data_free</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_run_in_thread</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">bake_cake_thread</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span><span class="w"> </span><span class="o">*</span>
<span class="nf">baker_bake_cake_finish</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">         </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                        </span><span class="n">GAsyncResult</span><span class="w">  </span><span class="o">*</span><span class="n">result</span><span class="p">,</span>
<span class="w">                        </span><span class="n">GError</span><span class="w">       </span><span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">g_return_val_if_fail</span><span class="w"> </span><span class="p">(</span><span class="n">g_task_is_valid</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">g_task_propagate_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">G_TASK</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">),</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Adding cancellability to uncancellable tasks</dt><dd></dd>
</dl>
<p>Finally, <a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread</span></code></a>() and <a class="reference internal" href="#Gio.Task.run_in_thread_sync" title="Gio.Task.run_in_thread_sync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread_sync</span></code></a>()
can be used to turn an uncancellable operation into a
cancellable one. If you call <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_return_on_cancel</span></code></a>(),
passing <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, then if the task’s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> is cancelled,
it will return control back to the caller immediately, while
allowing the task thread to continue running in the background
(and simply discarding its result when it finally does finish).
Provided that the task thread is careful about how it uses
locks and other externally-visible resources, this allows you
to make “GLib-friendly” asynchronous and cancellable
synchronous variants of blocking APIs.</p>
<p>Cancelling a task:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span>
<span class="nf">bake_cake_thread</span><span class="w"> </span><span class="p">(</span><span class="n">GTask</span><span class="w">         </span><span class="o">*</span><span class="n">task</span><span class="p">,</span>
<span class="w">                  </span><span class="n">gpointer</span><span class="w">       </span><span class="n">source_object</span><span class="p">,</span>
<span class="w">                  </span><span class="n">gpointer</span><span class="w">       </span><span class="n">task_data</span><span class="p">,</span>
<span class="w">                  </span><span class="n">GCancellable</span><span class="w">  </span><span class="o">*</span><span class="n">cancellable</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">Baker</span><span class="w"> </span><span class="o">*</span><span class="n">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">source_object</span><span class="p">;</span>
<span class="w">  </span><span class="n">CakeData</span><span class="w"> </span><span class="o">*</span><span class="n">cake_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">Cake</span><span class="w"> </span><span class="o">*</span><span class="n">cake</span><span class="p">;</span>
<span class="w">  </span><span class="n">GError</span><span class="w"> </span><span class="o">*</span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">  </span><span class="n">cake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bake_cake</span><span class="w"> </span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">radius</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">flavor</span><span class="p">,</span>
<span class="w">                    </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span>
<span class="w">                    </span><span class="o">&amp;</span><span class="n">error</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">g_task_return_error</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// If the task has already been cancelled, then we don&#39;t want to add</span>
<span class="w">  </span><span class="c1">// the cake to the cake cache. Likewise, we don&#39;t  want to have the</span>
<span class="w">  </span><span class="c1">// task get cancelled in the middle of updating the cache.</span>
<span class="w">  </span><span class="c1">// g_task_set_return_on_cancel() will return %TRUE here if it managed</span>
<span class="w">  </span><span class="c1">// to disable return-on-cancel, or %FALSE if the task was cancelled</span>
<span class="w">  </span><span class="c1">// before it could.</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g_task_set_return_on_cancel</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// If the caller cancels at this point, their</span>
<span class="w">      </span><span class="c1">// GAsyncReadyCallback won&#39;t be invoked until we return,</span>
<span class="w">      </span><span class="c1">// so we don&#39;t have to worry that this code will run at</span>
<span class="w">      </span><span class="c1">// the same time as that code does. But if there were</span>
<span class="w">      </span><span class="c1">// other functions that might look at the cake cache,</span>
<span class="w">      </span><span class="c1">// then we&#39;d probably need a GMutex here as well.</span>
<span class="w">      </span><span class="n">baker_add_cake_to_cache</span><span class="w"> </span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">cake</span><span class="p">);</span>
<span class="w">      </span><span class="n">g_task_return_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">cake</span><span class="p">,</span><span class="w"> </span><span class="n">g_object_unref</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">baker_bake_cake_async</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">               </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                       </span><span class="n">guint</span><span class="w">                </span><span class="n">radius</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFlavor</span><span class="w">           </span><span class="n">flavor</span><span class="p">,</span>
<span class="w">                       </span><span class="n">CakeFrostingType</span><span class="w">     </span><span class="n">frosting</span><span class="p">,</span>
<span class="w">                       </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w">          </span><span class="o">*</span><span class="n">message</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GCancellable</span><span class="w">        </span><span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
<span class="w">                       </span><span class="n">GAsyncReadyCallback</span><span class="w">  </span><span class="n">callback</span><span class="p">,</span>
<span class="w">                       </span><span class="n">gpointer</span><span class="w">             </span><span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">CakeData</span><span class="w"> </span><span class="o">*</span><span class="n">cake_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="p">;</span>

<span class="w">  </span><span class="n">cake_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_slice_new</span><span class="w"> </span><span class="p">(</span><span class="n">CakeData</span><span class="p">);</span>

<span class="w">  </span><span class="p">...</span>

<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_new</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"> </span><span class="n">user_data</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span><span class="w"> </span><span class="n">cake_data_free</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_return_on_cancel</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_run_in_thread</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">bake_cake_thread</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span><span class="w"> </span><span class="o">*</span>
<span class="nf">baker_bake_cake_sync</span><span class="w"> </span><span class="p">(</span><span class="n">Baker</span><span class="w">               </span><span class="o">*</span><span class="n">self</span><span class="p">,</span>
<span class="w">                      </span><span class="n">guint</span><span class="w">                </span><span class="n">radius</span><span class="p">,</span>
<span class="w">                      </span><span class="n">CakeFlavor</span><span class="w">           </span><span class="n">flavor</span><span class="p">,</span>
<span class="w">                      </span><span class="n">CakeFrostingType</span><span class="w">     </span><span class="n">frosting</span><span class="p">,</span>
<span class="w">                      </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w">          </span><span class="o">*</span><span class="n">message</span><span class="p">,</span>
<span class="w">                      </span><span class="n">GCancellable</span><span class="w">        </span><span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
<span class="w">                      </span><span class="n">GError</span><span class="w">             </span><span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">CakeData</span><span class="w"> </span><span class="o">*</span><span class="n">cake_data</span><span class="p">;</span>
<span class="w">  </span><span class="n">GTask</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="p">;</span>
<span class="w">  </span><span class="n">Cake</span><span class="w"> </span><span class="o">*</span><span class="n">cake</span><span class="p">;</span>

<span class="w">  </span><span class="n">cake_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_slice_new</span><span class="w"> </span><span class="p">(</span><span class="n">CakeData</span><span class="p">);</span>

<span class="w">  </span><span class="p">...</span>

<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_new</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">cancellable</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_task_data</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">cake_data</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span><span class="w"> </span><span class="n">cake_data_free</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_set_return_on_cancel</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_task_run_in_thread_sync</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">bake_cake_thread</span><span class="p">);</span>

<span class="w">  </span><span class="n">cake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_task_propagate_pointer</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">);</span>
<span class="w">  </span><span class="n">g_object_unref</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">cake</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Porting from <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult</span></code></a></dt><dd></dd>
</dl>
<p><a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a>'s API attempts to be simpler than <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult</span></code></a>'s
in several ways:</p>
<ul class="simple">
<li><p>You can save task-specific data with <a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_task_data</span></code></a>(), and
retrieve it later with <a class="reference internal" href="#Gio.Task.get_task_data" title="Gio.Task.get_task_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.get_task_data</span></code></a>(). This replaces the
abuse of g_simple_async_result_set_op_res_gpointer() for the same
purpose with <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult</span></code></a>.</p></li>
<li><p>In addition to the task data, <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> also keeps track of the
<a class="reference external" href="https://developer.gnome.org/gio/stable/GAsyncResult.html#io-priority">priority</a>, <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a>, and
<a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a> associated with the task, so tasks that consist of
a chain of simpler asynchronous operations will have easy access
to those values when starting each sub-task.</p></li>
<li><p><a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error_if_cancelled</span></code></a>() provides simplified
handling for cancellation. In addition, cancellation
overrides any other <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> return value by default, like
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult</span></code></a> does when
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult.set_check_cancellable" title="Gio.SimpleAsyncResult.set_check_cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult.set_check_cancellable</span></code></a>() is called.
(You can use <a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_check_cancellable</span></code></a>() to turn off that
behavior.) On the other hand, <a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread</span></code></a>()
guarantees that it will always run your
<code class="docutils literal notranslate"><span class="pre">task_func</span></code>, even if the task’s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a>
is already cancelled before the task gets a chance to run;
you can start your <code class="docutils literal notranslate"><span class="pre">task_func</span></code> with a
<a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error_if_cancelled</span></code></a>() check if you need the
old behavior.</p></li>
<li><p>The “return” methods (eg, <a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>())
automatically cause the task to be “completed” as well, and
there is no need to worry about the “complete” vs “complete
in idle” distinction. (<a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> automatically figures out
whether the task’s callback can be invoked directly, or
if it needs to be sent to another <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a>, or delayed
until the next iteration of the current <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a>.)</p></li>
<li><p>The “finish” functions for <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> based operations are generally
much simpler than <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult</span></code></a> ones, normally consisting
of only a single call to <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.propagate_pointer</span></code></a>() or the like. “steals” the return value from
the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a>, it is not necessary to juggle pointers around to
prevent it from being freed twice.</p></li>
<li><p>With <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult</span></code></a>, it was common to call
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult.propagate_error" title="Gio.SimpleAsyncResult.propagate_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult.propagate_error</span></code></a>() from the
<code class="docutils literal notranslate"><span class="pre">_finish()</span></code> wrapper function, and have
virtual method implementations only deal with successful
returns. This behavior is deprecated, because it makes it
difficult for a subclass to chain to a parent class’s async
methods. Instead, the wrapper function should just be a
simple wrapper, and the virtual method should call an
appropriate <code class="docutils literal notranslate"><span class="pre">g_task_propagate_</span></code> function.
Note that wrapper methods can now use
<a class="reference internal" href="AsyncResult.html#Gio.AsyncResult.legacy_propagate_error" title="Gio.AsyncResult.legacy_propagate_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult.legacy_propagate_error</span></code></a>() to do old-style
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.SimpleAsyncResult</span></code></a> error-returning behavior, and
<a class="reference internal" href="AsyncResult.html#Gio.AsyncResult.is_tagged" title="Gio.AsyncResult.is_tagged"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult.is_tagged</span></code></a>() to check if a result is tagged as
having come from the <code class="docutils literal notranslate"><span class="pre">_async()</span></code> wrapper
function (for “short-circuit” results, such as when passing
0 to <a class="reference internal" href="InputStream.html#Gio.InputStream.read_async" title="Gio.InputStream.read_async"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.InputStream.read_async</span></code></a>()).</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version g_task_propagate_pointer(.</span></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.is_valid">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_object</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L2139"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> (<a class="reference internal" href="AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult</span></code></a>) – A <a class="reference internal" href="AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult</span></code></a></p></li>
<li><p><strong>source_object</strong> (<a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – the source object
expected to be associated with the task</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if <cite>result</cite> and <cite>source_object</cite> are valid, <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>
if not</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Checks that <cite>result</cite> is a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a>, and that <cite>source_object</cite> is its
source object (or that <cite>source_object</cite> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> and <cite>result</cite> has no
source object). This can be used in g_return_if_fail() checks.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.new">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cancellable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">callback_data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L719"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.new" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_object</strong> (<a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – the <a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Object</span></code></a> that owns
this task, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>cancellable</strong> (<a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – optional <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> object, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> to ignore.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncReadyCallback</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – a <a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncReadyCallback</span></code></a>.</p></li>
<li><p><strong>callback_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – user data passed to <cite>callback</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a></p>
</dd>
</dl>
<p>Creates a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> acting on <cite>source_object</cite>, which will eventually be
used to invoke <cite>callback</cite> in the current
<a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext.push_thread_default" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">thread-default</span> <span class="pre">main</span> <span class="pre">context</span></code></a>.</p>
<p>Call this in the “start” method of your asynchronous method, and
pass the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> around throughout the asynchronous operation. You
can use <a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_task_data</span></code></a>() to attach task-specific data to the
object, which you can retrieve later via <a class="reference internal" href="#Gio.Task.get_task_data" title="Gio.Task.get_task_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.get_task_data</span></code></a>().</p>
<p>By default, if <cite>cancellable</cite> is cancelled, then the return value of
the task will always be <a class="reference internal" href="../enums.html#Gio.IOErrorEnum.CANCELLED" title="Gio.IOErrorEnum.CANCELLED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.IOErrorEnum.CANCELLED</span></code></a>, even if the task had
already completed before the cancellation. This allows for
simplified handling in cases where cancellation may imply that
other objects that the task depends on have been destroyed. If you
do not want this behavior, you can use
<a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_check_cancellable</span></code></a>() to change it.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.report_error">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">report_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L766"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.report_error" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_object</strong> (<a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – the <a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Object</span></code></a> that owns
this task, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncReadyCallback</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – a <a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncReadyCallback</span></code></a>.</p></li>
<li><p><strong>callback_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – user data passed to <cite>callback</cite>.</p></li>
<li><p><strong>source_tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – an opaque pointer indicating the source of this task</p></li>
<li><p><strong>error</strong> (<a class="reference external" href="../../GLib-2.0/classes/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.Error</span></code></a>) – error to report</p></li>
</ul>
</dd>
</dl>
<p>Creates a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> and then immediately calls <a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error</span></code></a>()
on it. Use this in the wrapper function of an asynchronous method
when you want to avoid even calling the virtual method. You can
then use <a class="reference internal" href="AsyncResult.html#Gio.AsyncResult.is_tagged" title="Gio.AsyncResult.is_tagged"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult.is_tagged</span></code></a>() in the finish method wrapper to
check if the result there is tagged as having been created by the
wrapper method, and deal with it appropriately if so.</p>
<p>See also g_task_report_new_error().</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_cancellable">
<span class="sig-name descname"><span class="pre">get_cancellable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1144"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_cancellable" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>self</cite>'s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a></p>
</dd>
</dl>
<p>Gets <cite>self</cite>'s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_check_cancellable">
<span class="sig-name descname"><span class="pre">get_check_cancellable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1161"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_check_cancellable" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Gets <cite>self</cite>'s check-cancellable flag. See
<a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_check_cancellable</span></code></a>() for more details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_completed">
<span class="sig-name descname"><span class="pre">get_completed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L2114"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_completed" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the task has completed, <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> otherwise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Gets the value of <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> <a class="reference internal" href="#Gio.Task.props.completed" title="Gio.Task.props.completed"><code class="xref py py-data docutils literal notranslate"><span class="pre">:completed</span></code></a>. This changes from <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> after
the task’s callback is invoked, and will return <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> if called from inside
the callback.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.44.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_context">
<span class="sig-name descname"><span class="pre">get_context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1126"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_context" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>self</cite>'s <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a></p>
</dd>
</dl>
<p>Gets the <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a> that <cite>self</cite> will return its result in (that
is, the context that was the
<a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext.push_thread_default" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">thread-default</span> <span class="pre">main</span> <span class="pre">context</span></code></a>
at the point when <cite>self</cite> was created).</p>
<p>This will always return a non-<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> value, even if the task’s
context is the default <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1215"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_name" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>self</cite>’s name, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
<p>Gets <cite>self</cite>’s name. See <a class="reference internal" href="#Gio.Task.set_name" title="Gio.Task.set_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_name</span></code></a>().</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.60.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_priority">
<span class="sig-name descname"><span class="pre">get_priority</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1102"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_priority" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>self</cite>'s priority</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
<p>Gets <cite>self</cite>'s priority</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_return_on_cancel">
<span class="sig-name descname"><span class="pre">get_return_on_cancel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1179"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_return_on_cancel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Gets <cite>self</cite>'s return-on-cancel flag. See
<a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_return_on_cancel</span></code></a>() for more details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_source_object">
<span class="sig-name descname"><span class="pre">get_source_object</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1055"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_source_object" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>self</cite>'s source object, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
<p>Gets the source object from <cite>self</cite>. Like
<a class="reference internal" href="AsyncResult.html#Gio.AsyncResult.get_source_object" title="Gio.AsyncResult.get_source_object"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult.get_source_object</span></code></a>(), but does not ref the object.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_source_tag">
<span class="sig-name descname"><span class="pre">get_source_tag</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1198"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_source_tag" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>self</cite>'s source tag</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
<p>Gets <cite>self</cite>'s source tag. See <a class="reference internal" href="#Gio.Task.set_source_tag" title="Gio.Task.set_source_tag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_source_tag</span></code></a>().</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.get_task_data">
<span class="sig-name descname"><span class="pre">get_task_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1084"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.get_task_data" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>self</cite>'s <code class="docutils literal notranslate"><span class="pre">task_data</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
<p>Gets <cite>self</cite>'s <code class="docutils literal notranslate"><span class="pre">task_data</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.had_error">
<span class="sig-name descname"><span class="pre">had_error</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1994"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.had_error" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the task resulted in an error, <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> otherwise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Tests if <cite>self</cite> resulted in an error.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.propagate_boolean">
<span class="sig-name descname"><span class="pre">propagate_boolean</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1868"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.propagate_boolean" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GLib-2.0/classes/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">GLib.Error</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the task result, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> on error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Gets the result of <cite>self</cite> as a <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>.</p>
<p>If the task resulted in an error, or was cancelled, then this will
instead return <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> and set <cite>error</cite>.</p>
<p>Since this method transfers ownership of the return value (or
error) to the caller, you may only call it once.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.propagate_int">
<span class="sig-name descname"><span class="pre">propagate_int</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1813"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.propagate_int" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GLib-2.0/classes/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">GLib.Error</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the task result, or -1 on error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
<p>Gets the result of <cite>self</cite> as an integer (#gssize).</p>
<p>If the task resulted in an error, or was cancelled, then this will
instead return -1 and set <cite>error</cite>.</p>
<p>Since this method transfers ownership of the return value (or
error) to the caller, you may only call it once.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.propagate_pointer">
<span class="sig-name descname"><span class="pre">propagate_pointer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1757"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.propagate_pointer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GLib-2.0/classes/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">GLib.Error</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the task result, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> on error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
<p>Gets the result of <cite>self</cite> as a pointer, and transfers ownership
of that value to the caller.</p>
<p>If the task resulted in an error, or was cancelled, then this will
instead return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> and set <cite>error</cite>.</p>
<p>Since this method transfers ownership of the return value (or
error) to the caller, you may only call it once.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.propagate_value">
<span class="sig-name descname"><span class="pre">propagate_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L2080"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.propagate_value" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="../../GLib-2.0/classes/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">GLib.Error</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if <cite>self</cite> succeeded, <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> on error.</p>
<dl class="field-list simple">
<dt class="field-odd">value</dt>
<dd class="field-odd"><p>return location for the <a class="reference external" href="../../GObject-2.0/classes/Value.html#GObject.Value" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Value</span></code></a></p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, <strong>value</strong>: <a class="reference external" href="../../GObject-2.0/classes/Value.html#GObject.Value" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Value</span></code></a>)</p>
</dd>
</dl>
<p>Gets the result of <cite>self</cite> as a <a class="reference external" href="../../GObject-2.0/classes/Value.html#GObject.Value" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Value</span></code></a>, and transfers ownership of
that value to the caller. As with <a class="reference internal" href="#Gio.Task.return_value" title="Gio.Task.return_value"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_value</span></code></a>(), this is
a generic low-level method; <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.propagate_pointer</span></code></a>() and the like
will usually be more useful for C code.</p>
<p>If the task resulted in an error, or was cancelled, then this will
instead set <cite>error</cite> and return <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p>
<p>Since this method transfers ownership of the return value (or
error) to the caller, you may only call it once.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.64.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.return_boolean">
<span class="sig-name descname"><span class="pre">return_boolean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1839"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.return_boolean" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>result</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>) – the <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a> result of a task function.</p>
</dd>
</dl>
<p>Sets <cite>self</cite>'s result to <cite>result</cite> and completes the task (see
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>() for more discussion of exactly what this
means).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.return_error">
<span class="sig-name descname"><span class="pre">return_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1902"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.return_error" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>error</strong> (<a class="reference external" href="../../GLib-2.0/classes/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.Error</span></code></a>) – the <a class="reference external" href="../../GLib-2.0/classes/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.Error</span></code></a> result of a task function.</p>
</dd>
</dl>
<p>Sets <cite>self</cite>'s result to <cite>error</cite> (which <cite>self</cite> assumes ownership of)
and completes the task (see <a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>() for more
discussion of exactly what this means).</p>
<p>Note that since the task takes ownership of <cite>error</cite>, and since the
task may be completed before returning from <a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error</span></code></a>(),
you cannot assume that <cite>error</cite> is still valid after calling this.
Call <code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.Error.copy</span></code>() on the error if you need to keep a local copy
as well.</p>
<p>See also g_task_return_new_error().</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.return_error_if_cancelled">
<span class="sig-name descname"><span class="pre">return_error_if_cancelled</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1961"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.return_error_if_cancelled" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if <cite>self</cite> has been cancelled, <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> if not</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Checks if <cite>self</cite>'s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> has been cancelled, and if so, sets
<cite>self</cite>'s error accordingly and completes the task (see
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>() for more discussion of exactly what this
means).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.return_int">
<span class="sig-name descname"><span class="pre">return_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1784"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.return_int" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>result</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>) – the integer (#gssize) result of a task function.</p>
</dd>
</dl>
<p>Sets <cite>self</cite>'s result to <cite>result</cite> and completes the task (see
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>() for more discussion of exactly what this
means).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.return_pointer">
<span class="sig-name descname"><span class="pre">return_pointer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_destroy</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1726"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.return_pointer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – the pointer result of a task
function</p></li>
<li><p><strong>result_destroy</strong> (<a class="reference external" href="../../GLib-2.0/callbacks.html#GLib.DestroyNotify" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.DestroyNotify</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – a <a class="reference external" href="../../GLib-2.0/callbacks.html#GLib.DestroyNotify" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.DestroyNotify</span></code></a> function.</p></li>
</ul>
</dd>
</dl>
<p>Sets <cite>self</cite>'s result to <cite>result</cite> and completes the task. If <cite>result</cite>
is not <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, then <cite>result_destroy</cite> will be used to free <cite>result</cite> if
the caller does not take ownership of it with
<a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.propagate_pointer</span></code></a>().</p>
<p>“Completes the task” means that for an ordinary asynchronous task
it will either invoke the task’s callback, or else queue that
callback to be invoked in the proper <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a>, or in the next
iteration of the current <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a>. For a task run via
<a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread</span></code></a>() or <a class="reference internal" href="#Gio.Task.run_in_thread_sync" title="Gio.Task.run_in_thread_sync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread_sync</span></code></a>(), calling this
method will save <cite>result</cite> to be returned to the caller later, but
the task will not actually be completed until the <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a>
exits.</p>
<p>Note that since the task may be completed before returning from
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>(), you cannot assume that <cite>result</cite> is still
valid after calling this, unless you are still holding another
reference on it.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.return_value">
<span class="sig-name descname"><span class="pre">return_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L2033"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.return_value" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>result</strong> (<a class="reference external" href="../../GObject-2.0/classes/Value.html#GObject.Value" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Value</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – the <a class="reference external" href="../../GObject-2.0/classes/Value.html#GObject.Value" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Value</span></code></a> result of
a task function</p>
</dd>
</dl>
<p>Sets <cite>self</cite>'s result to <cite>result</cite> (by copying it) and completes the task.</p>
<p>If <cite>result</cite> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> then a <a class="reference external" href="../../GObject-2.0/classes/Value.html#GObject.Value" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Value</span></code></a> of type <a class="reference external" href="../../GObject-2.0/constants.html#GObject.TYPE_POINTER" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.TYPE_POINTER</span></code></a>
with a value of <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> will be used for the result.</p>
<p>This is a very generic low-level method intended primarily for use
by language bindings; for C code, <a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>() and the
like will normally be much easier to use.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.64.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.run_in_thread">
<span class="sig-name descname"><span class="pre">run_in_thread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_func</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1564"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.run_in_thread" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_func</strong> (<a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a>) – a <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a></p>
</dd>
</dl>
<p>Runs <cite>task_func</cite> in another thread. When <cite>task_func</cite> returns, <cite>self</cite>'s
<a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncReadyCallback</span></code></a> will be invoked in <cite>self</cite>'s <a class="reference external" href="../../GLib-2.0/classes/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.MainContext</span></code></a>.</p>
<p>This takes a ref on <cite>self</cite> until the task completes.</p>
<p>See <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a> for more details about how <cite>task_func</cite> is handled.</p>
<p>Although GLib currently rate-limits the tasks queued via
<a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread</span></code></a>(), you should not assume that it will always
do this. If you have a very large number of tasks to run (several tens of
tasks), but don’t want them to all run at once, you should only queue a
limited number of them (around ten) at a time.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.run_in_thread_sync">
<span class="sig-name descname"><span class="pre">run_in_thread_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_func</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1611"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.run_in_thread_sync" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_func</strong> (<a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a>) – a <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a></p>
</dd>
</dl>
<p>Runs <cite>task_func</cite> in another thread, and waits for it to return or be
cancelled. You can use <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.propagate_pointer</span></code></a>(), etc, afterward
to get the result of <cite>task_func</cite>.</p>
<p>See <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a> for more details about how <cite>task_func</cite> is handled.</p>
<p>Normally this is used with tasks created with a <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
<code class="docutils literal notranslate"><span class="pre">callback</span></code>, but note that even if the task does
have a callback, it will not be invoked when <cite>task_func</cite> returns.
<a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> <a class="reference internal" href="#Gio.Task.props.completed" title="Gio.Task.props.completed"><code class="xref py py-data docutils literal notranslate"><span class="pre">:completed</span></code></a> will be set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> just before this function returns.</p>
<p>Although GLib currently rate-limits the tasks queued via
<a class="reference internal" href="#Gio.Task.run_in_thread_sync" title="Gio.Task.run_in_thread_sync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread_sync</span></code></a>(), you should not assume that it will
always do this. If you have a very large number of tasks to run,
but don’t want them to all run at once, you should only queue a
limited number of them at a time.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.set_check_cancellable">
<span class="sig-name descname"><span class="pre">set_check_cancellable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">check_cancellable</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L899"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.set_check_cancellable" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>check_cancellable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> will check the state of
its <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> for you.</p>
</dd>
</dl>
<p>Sets or clears <cite>self</cite>'s check-cancellable flag. If this is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>
(the default), then <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.propagate_pointer</span></code></a>(), etc, and
<a class="reference internal" href="#Gio.Task.had_error" title="Gio.Task.had_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.had_error</span></code></a>() will check the task’s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> first, and
if it has been cancelled, then they will consider the task to have
returned an “Operation was cancelled” error
(<a class="reference internal" href="../enums.html#Gio.IOErrorEnum.CANCELLED" title="Gio.IOErrorEnum.CANCELLED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.IOErrorEnum.CANCELLED</span></code></a>), regardless of any other error or return
value the task may have had.</p>
<p>If <cite>check_cancellable</cite> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, then the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task</span></code></a> will not check the
cancellable itself, and it is up to <cite>self</cite>'s owner to do this (eg,
via <a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error_if_cancelled</span></code></a>()).</p>
<p>If you are using <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_return_on_cancel</span></code></a>() as well, then
you must leave check-cancellable set <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.set_name">
<span class="sig-name descname"><span class="pre">set_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1032"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.set_name" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – a human readable name for the task, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> to unset it</p>
</dd>
</dl>
<p>Sets <cite>self</cite>’s name, used in debugging and profiling. The name defaults to
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
<p>The task name should describe in a human readable way what the task does.
For example, ‘Open file’ or ‘Connect to network host’. It is used to set the
name of the <a class="reference external" href="../../GLib-2.0/classes/Source.html#GLib.Source" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.Source</span></code></a> used for idle completion of the task.</p>
<p>This function may only be called before the <cite>self</cite> is first used in a thread
other than the one it was constructed in. It is called automatically by
<a class="reference internal" href="#Gio.Task.set_source_tag" title="Gio.Task.set_source_tag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_source_tag</span></code></a>() if not called already.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.60.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.set_priority">
<span class="sig-name descname"><span class="pre">set_priority</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">priority</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L865"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.set_priority" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>priority</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>) – the <a class="reference external" href="https://developer.gnome.org/gio/stable/GAsyncResult.html#io-priority">priority</a> of the request</p>
</dd>
</dl>
<p>Sets <cite>self</cite>'s priority. If you do not call this, it will default to
<a class="reference external" href="../../GLib-2.0/constants.html#GLib.PRIORITY_DEFAULT" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.PRIORITY_DEFAULT</span></code></a>.</p>
<p>This will affect the priority of <a class="reference external" href="../../GLib-2.0/classes/Source.html#GLib.Source" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.Sources</span></code></a> created with
g_task_attach_source() and the scheduling of tasks run in threads,
and can also be explicitly retrieved later via
<a class="reference internal" href="#Gio.Task.get_priority" title="Gio.Task.get_priority"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.get_priority</span></code></a>().</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.set_return_on_cancel">
<span class="sig-name descname"><span class="pre">set_return_on_cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">return_on_cancel</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L952"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.set_return_on_cancel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>return_on_cancel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether the task returns automatically when
it is cancelled.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if <cite>self</cite>'s return-on-cancel flag was changed to
match <cite>return_on_cancel</cite>. <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> if <cite>self</cite> has already been
cancelled.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
<p>Sets or clears <cite>self</cite>'s return-on-cancel flag. This is only
meaningful for tasks run via <a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread</span></code></a>() or
<a class="reference internal" href="#Gio.Task.run_in_thread_sync" title="Gio.Task.run_in_thread_sync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread_sync</span></code></a>().</p>
<p>If <cite>return_on_cancel</cite> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, then cancelling <cite>self</cite>'s
<a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> will immediately cause it to return, as though the
task’s <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a> had called
<a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error_if_cancelled</span></code></a>() and then returned.</p>
<p>This allows you to create a cancellable wrapper around an
uninterruptible function. The <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a> just needs to be
careful that it does not modify any externally-visible state after
it has been cancelled. To do that, the thread should call
<a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_return_on_cancel</span></code></a>() again to (atomically) set
return-on-cancel <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> before making externally-visible changes;
if the task gets cancelled before the return-on-cancel flag could
be changed, <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_return_on_cancel</span></code></a>() will indicate this by
returning <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p>
<p>You can disable and re-enable this flag multiple times if you wish.
If the task’s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> is cancelled while return-on-cancel is
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, then calling <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.set_return_on_cancel</span></code></a>() to set it <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>
again will cause the task to be cancelled at that point.</p>
<p>If the task’s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Cancellable</span></code></a> is already cancelled before you call
<a class="reference internal" href="#Gio.Task.run_in_thread" title="Gio.Task.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread</span></code></a>()/<a class="reference internal" href="#Gio.Task.run_in_thread_sync" title="Gio.Task.run_in_thread_sync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.run_in_thread_sync</span></code></a>(), then the
<a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.TaskThreadFunc</span></code></a> will still be run (for consistency), but the task
will also be completed right away.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.set_source_tag">
<span class="sig-name descname"><span class="pre">set_source_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_tag</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L1003"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.set_source_tag" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source_tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – an opaque pointer indicating the source of this task</p>
</dd>
</dl>
<p>Sets <cite>self</cite>'s source tag.</p>
<p>You can use this to tag a task return
value with a particular pointer (usually a pointer to the function
doing the tagging) and then later check it using
<a class="reference internal" href="#Gio.Task.get_source_tag" title="Gio.Task.get_source_tag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.get_source_tag</span></code></a>() (or <a class="reference internal" href="AsyncResult.html#Gio.AsyncResult.is_tagged" title="Gio.AsyncResult.is_tagged"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.AsyncResult.is_tagged</span></code></a>()) in the
task’s “finish” function, to figure out if the response came from a
particular place.</p>
<p>A macro wrapper around this function will automatically set the
task’s name to the string form of <cite>source_tag</cite> if it’s not already
set, for convenience.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Gio.Task.set_task_data">
<span class="sig-name descname"><span class="pre">set_task_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_data_destroy</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://gitlab.gnome.org/GNOME/glib/blob/2.74.4/gio/gtask.c#L835"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Gio.Task.set_task_data" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – task-specific data</p></li>
<li><p><strong>task_data_destroy</strong> (<a class="reference external" href="../../GLib-2.0/callbacks.html#GLib.DestroyNotify" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.DestroyNotify</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) – <a class="reference external" href="../../GLib-2.0/callbacks.html#GLib.DestroyNotify" title="(in GLib 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GLib.DestroyNotify</span></code></a> for <cite>task_data</cite></p></li>
</ul>
</dd>
</dl>
<p>Sets <cite>self</cite>'s task data (freeing the existing task data, if any).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.36.</span></p>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="property-details">
<h2>Property Details<a class="headerlink" href="#property-details" title="Permalink to this headline">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="Gio.Task.props.completed">
<span class="sig-prename descclassname"><span class="pre">Gio.Task.props.</span></span><span class="sig-name descname"><span class="pre">completed</span></span><a class="headerlink" href="#Gio.Task.props.completed" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Name</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">completed</span></code></p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Default Value</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p>
</dd>
<dt class="field-even">Flags</dt>
<dd class="field-even"><p><a class="reference external" href="../../GObject-2.0/flags.html#GObject.ParamFlags.READABLE" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">READABLE</span></code></a></p>
</dd>
</dl>
<p>Whether the task has completed, meaning its callback (if set) has been
invoked. This can only happen after <a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_pointer</span></code></a>(),
<a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gio.Task.return_error</span></code></a>() or one of the other return functions have been called
on the task.</p>
<p>This property is guaranteed to change from <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> exactly once.</p>
<p>The <a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GObject.Object</span></code></a> <a class="reference external" href="../../GObject-2.0/classes/Object.html#GObject.Object.signals.notify" title="(in GObject 2.0 v2.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">::notify</span></code></a> signal for this change is emitted in the same main
context as the task’s callback, immediately after that callback is invoked.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.44.</span></p>
</div>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>

    </section>

  </div> 

</body>
</html>