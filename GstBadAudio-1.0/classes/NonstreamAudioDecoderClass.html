<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>
    GstBadAudio.NonstreamAudioDecoderClass -
    
      Class Structures -
    
    GstBadAudio 1.0
  </title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/pgi.css" type="text/css" />
  

  
  <script type="text/javascript">

    function openSidebar(element) {
        window.location.href = element.href + location.hash;
        return false;
    }

    function inIframe() {
        try {
            return window.self !== window.top;
        } catch (e) {
            return true;
        }
    }

    function onLoaded() {
        if(!inIframe()) {
            var icons = document.getElementsByClassName('open-sidebar');

            for (var i = 0; i < icons.length; i ++) {
                icons[i].style.display = 'table-cell';
            }
        }
    }

    document.addEventListener('DOMContentLoaded', onLoaded, false);

  </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GstBadAudio.PlanarAudioAdapterClass" href="PlanarAudioAdapterClass.html" />
    <link rel="prev" title="Class Structures" href="../class-structs.html" /> 
</head>

<body class="wy-body-for-nav">

<div class="non-fixed-bar">
  <table class="navigation" summary="Navigation header" cellpadding="2" cellspacing="10" width="100%"><tbody><tr valign="middle">

<td class="open-sidebar" style="display:none"><a href="../../index.html#GstBadAudio-1.0/classes/NonstreamAudioDecoderClass.html" onclick="return openSidebar(this);"><i class="fa fa-search"></i></a></td>

<td class="shortcuts" align="left" width="100%">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">GstBadAudio 1.0</a> &raquo;</li>
      
          <li><a href="../class-structs.html">Class Structures</a> &raquo;</li>
      
    <li>GstBadAudio.NonstreamAudioDecoderClass</li>
  </ul>
</td>
<td><a accesskey="h" href="../index.html"><i class="fa fa-home"></i></a></td>


<td><a accesskey="u" href="../class-structs.html"><i class="fa fa-chevron-up"></i></a></td>



<td><a accesskey="p" href="../class-structs.html"><i class="fa fa-chevron-left"></i></a></td>



<td><a accesskey="n" href="PlanarAudioAdapterClass.html"><i class="fa fa-chevron-right"></i></a></td>


</tr></tbody>
</table>

<div class="local-toc">
    <ul>
<li><a class="reference internal" href="#">GstBadAudio.NonstreamAudioDecoderClass</a><ul>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#details">Details</a><ul>
<li><a class="reference internal" href="#GstBadAudio.NonstreamAudioDecoderClass"><code class="docutils literal notranslate"><span class="pre">GstBadAudio.NonstreamAudioDecoderClass</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

<div class="fixed-bar">
  <table class="navigation" summary="Navigation header" cellpadding="2" cellspacing="10" width="100%"><tbody><tr valign="middle">

<td class="open-sidebar" style="display:none"><a href="../../index.html#GstBadAudio-1.0/classes/NonstreamAudioDecoderClass.html" onclick="return openSidebar(this);"><i class="fa fa-search"></i></a></td>

<td class="shortcuts" align="left" width="100%">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">GstBadAudio 1.0</a> &raquo;</li>
      
          <li><a href="../class-structs.html">Class Structures</a> &raquo;</li>
      
    <li>GstBadAudio.NonstreamAudioDecoderClass</li>
  </ul>
</td>
<td><a accesskey="h" href="../index.html"><i class="fa fa-home"></i></a></td>


<td><a accesskey="u" href="../class-structs.html"><i class="fa fa-chevron-up"></i></a></td>



<td><a accesskey="p" href="../class-structs.html"><i class="fa fa-chevron-left"></i></a></td>



<td><a accesskey="n" href="PlanarAudioAdapterClass.html"><i class="fa fa-chevron-right"></i></a></td>


</tr></tbody>
</table>

<div class="local-toc">
    <ul>
<li><a class="reference internal" href="#">GstBadAudio.NonstreamAudioDecoderClass</a><ul>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#details">Details</a><ul>
<li><a class="reference internal" href="#GstBadAudio.NonstreamAudioDecoderClass"><code class="docutils literal notranslate"><span class="pre">GstBadAudio.NonstreamAudioDecoderClass</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

  <div class="wy-grid-for-nav">

    

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="main">
            
  <section id="gstbadaudio-nonstreamaudiodecoderclass">
<h1>GstBadAudio.NonstreamAudioDecoderClass<a class="headerlink" href="#gstbadaudio-nonstreamaudiodecoderclass" title="Permalink to this heading">¶</a></h1>
<section id="fields">
<span id="gstbadaudio-nonstreamaudiodecoderclass-fields"></span><h2>Fields<a class="headerlink" href="#fields" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.4%" />
<col style="width: 0.8%" />
<col style="width: 0.8%" />
<col style="width: 82.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>decide_allocation</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Sets up the allocation parameters for allocating output buffers. The passed in query contains the result of the downstream allocation query. Subclasses should chain up to the parent implementation to invoke the default handler.</p></td>
</tr>
<tr class="row-odd"><td><p>decode</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Always required. Allocates an output buffer, fills it with decoded audio samples, and must be passed on to *buffer . The number of decoded samples must be passed on to *num_samples. If decoding finishes or the decoding is no longer possible (for example, due to an unrecoverable error), this function returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, otherwise <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td><p>element_class</p></td>
<td><p><a class="reference external" href="../../Gst-1.0/classes/ElementClass.html#Gst.ElementClass" title="(in Gst 1.0 v1.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gst.ElementClass</span></code></a></p></td>
<td><p>r</p></td>
<td><p>The parent class structure</p></td>
</tr>
<tr class="row-odd"><td><p>get_current_subsong</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Returns the current subsong. If the current subsong mode is not <a class="reference internal" href="../enums.html#GstBadAudio.NonstreamAudioSubsongMode.SINGLE" title="GstBadAudio.NonstreamAudioSubsongMode.SINGLE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GstBadAudio.NonstreamAudioSubsongMode.SINGLE</span></code></a>, this function’s return value is undefined. If this function is implemented by the subclass, <cite>get_num_subsongs</cite> should be implemented as well.</p></td>
</tr>
<tr class="row-even"><td><p>get_main_tags</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Returns a tag list containing the main song tags, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if there are no such tags. Returned tags will be unref’d. Use this vfunc instead of manually pushing a tag event downstream to avoid edge cases where not yet pushed sticky tag events get overwritten before they are pushed (can for example happen with decodebin if tags are pushed downstream before the decodebin pads are linked).</p></td>
</tr>
<tr class="row-odd"><td><p>get_num_loops</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Returns the number of loops for playback.</p></td>
</tr>
<tr class="row-even"><td><p>get_num_subsongs</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Returns the number of subsongs available. The return values 0 and 1 have a similar, but distinct, meaning. If this function returns 0, then this decoder does not support subsongs at all. <cite>get_current_subsong</cite> must then also always return 0. In other words, this function either never returns 0, or never returns anything else than 0. A return value of 1 means that the media contains either only one or no subsongs (the entire song is then considered to be one single subsong). 1 also means that only this very media has no or just one subsong, and the decoder itself can support multiple subsongs.</p></td>
</tr>
<tr class="row-odd"><td><p>get_subsong_duration</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Returns the duration of a subsong. Returns <a class="reference external" href="../../Gst-1.0/constants.html#Gst.CLOCK_TIME_NONE" title="(in Gst 1.0 v1.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gst.CLOCK_TIME_NONE</span></code></a> if duration is unknown.</p></td>
</tr>
<tr class="row-even"><td><p>get_subsong_tags</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Returns tags for a subsong, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if there are no tags. Returned tags will be unref’d.</p></td>
</tr>
<tr class="row-odd"><td><p>get_supported_output_modes</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Always required. Returns a bitmask containing the output modes the subclass supports. The mask is formed by a bitwise OR combination of integers, which can be calculated this way:  1 &lt;&lt; GST_NONSTREAM_AUDIO_OUTPUT_MODE_&lt;mode&gt; , where mode is either STEADY or LOOPING</p></td>
</tr>
<tr class="row-even"><td><p>load_from_buffer</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Required if loads_from_sinkpad is set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (the default value). Loads the media from the given buffer. The entire media is supplied at once, so after this call, loading should be finished. This function can also make use of a suggested initial subsong &amp; subsong mode and initial playback position (but isn’t required to). In case it chooses a different starting position, the function must pass this position to *initial_position. The subclass does not have to unref the input buffer; the base class does that already.</p></td>
</tr>
<tr class="row-odd"><td><p>load_from_custom</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Required if loads_from_sinkpad is set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>. Loads the media in a way defined by the custom sink. Data is not supplied; the derived class has to handle this on its own. Otherwise, this function is identical to <cite>load_from_buffer</cite>.</p></td>
</tr>
<tr class="row-even"><td><p>loads_from_sinkpad</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p></td>
<td><p>r</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>negotiate</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>propose_allocation</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Proposes buffer allocation parameters for upstream elements. Subclasses should chain up to the parent implementation to invoke the default handler.</p></td>
</tr>
<tr class="row-odd"><td><p>seek</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Called when a seek event is received by the parent class. new_position is a pointer to a GstClockTime integer which contains a position relative to the current subsong. Minimum is 0, maximum is the subsong length. After this function finishes, new_position is set to the actual new position (which may differ from the request position, depending on the decoder).</p></td>
</tr>
<tr class="row-even"><td><p>set_current_subsong</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Sets the current subsong. This function is allowed to switch to a different subsong than the required one, and can optionally make use of the suggested initial position. In case it chooses a different starting position, the function must pass this position to *initial_position. This function switches the subsong mode to <a class="reference internal" href="../enums.html#GstBadAudio.NonstreamAudioSubsongMode.SINGLE" title="GstBadAudio.NonstreamAudioSubsongMode.SINGLE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GstBadAudio.NonstreamAudioSubsongMode.SINGLE</span></code></a> automatically. If this function is implemented by the subclass, <cite>get_current_subsong</cite> and <cite>get_num_subsongs</cite> should be implemented as well.</p></td>
</tr>
<tr class="row-odd"><td><p>set_num_loops</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Sets the number of loops for playback. If this is called during playback, the subclass must set any internal loop counters to zero. A loop value of -1 means infinite looping; 0 means no looping; and when the num_loops is greater than 0, playback should loop exactly num_loops times. If this function is implemented, <cite>get_num_loops</cite> should be implemented as well. The function can ignore the given values and choose another; however, <cite>get_num_loops</cite> should return this other value afterwards. It is up to the subclass to define where the loop starts and ends. It can mean that only a subset at the end or in the middle of a song is repeated, for example. If the current subsong mode is <a class="reference internal" href="../enums.html#GstBadAudio.NonstreamAudioSubsongMode.SINGLE" title="GstBadAudio.NonstreamAudioSubsongMode.SINGLE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GstBadAudio.NonstreamAudioSubsongMode.SINGLE</span></code></a>, then the subsong is repeated this many times. If it is <a class="reference internal" href="../enums.html#GstBadAudio.NonstreamAudioSubsongMode.ALL" title="GstBadAudio.NonstreamAudioSubsongMode.ALL"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GstBadAudio.NonstreamAudioSubsongMode.ALL</span></code></a>, then all subsongs are repeated this many times. With <a class="reference internal" href="../enums.html#GstBadAudio.NonstreamAudioSubsongMode.DECODER_DEFAULT" title="GstBadAudio.NonstreamAudioSubsongMode.DECODER_DEFAULT"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GstBadAudio.NonstreamAudioSubsongMode.DECODER_DEFAULT</span></code></a>, the behavior is decoder specific.</p></td>
</tr>
<tr class="row-even"><td><p>set_output_mode</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Sets the output mode the subclass has to use. Unlike with most other functions, the subclass cannot choose a different mode; it must use the requested one. If the output mode is set to LOOPING, <cite>gst_nonstream_audio_decoder_handle_loop</cite> must be called after playback moved back to the start of a loop.</p></td>
</tr>
<tr class="row-odd"><td><p>set_subsong_mode</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Sets the current subsong mode. Since this might influence the current playback position, this function must set the initial_position integer argument to a defined value. If the playback position is not affected at all, it must be set to <a class="reference external" href="../../Gst-1.0/constants.html#Gst.CLOCK_TIME_NONE" title="(in Gst 1.0 v1.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gst.CLOCK_TIME_NONE</span></code></a>. If the subsong is restarted after the mode switch, it is recommended to set the value to the position in the playback right after the switch (or 0 if the subsongs are always reset back to the beginning).</p></td>
</tr>
<tr class="row-even"><td><p>tell</p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></p></td>
<td><p>r</p></td>
<td><p>Optional. Called when a position query is received by the parent class. The position that this function returns must be relative to the current subsong. Thus, the minimum is 0, and the maximum is the subsong length.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="methods">
<span id="gstbadaudio-nonstreamaudiodecoderclass-methods"></span><h2>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<p>None</p>
</section>
<section id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="GstBadAudio.NonstreamAudioDecoderClass">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">GstBadAudio.</span></span><span class="sig-name descname"><span class="pre">NonstreamAudioDecoderClass</span></span><a class="headerlink" href="#GstBadAudio.NonstreamAudioDecoderClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclasses can override any of the available optional virtual methods or not, as
needed. At minimum, <cite>load_from_buffer</cite> (or <cite>load_from_custom</cite>), <cite>get_supported_output_modes</cite>,
and <cite>decode</cite> need to be overridden.</p>
<p>All functions are called with a locked decoder mutex.</p>
<p>If GST_ELEMENT_ERROR, GST_ELEMENT_WARNING, or GST_ELEMENT_INFO are called from
inside one of these functions, it is strongly recommended to unlock the decoder mutex
before and re-lock it after these macros to prevent potential deadlocks in case the
application does something with the element when it receives an ERROR/WARNING/INFO
message. Same goes for <a class="reference external" href="../../Gst-1.0/classes/Element.html#Gst.Element.post_message" title="(in Gst 1.0 v1.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gst.Element.post_message</span></code></a>() calls and non-serialized events.</p>
<p>By default, this class works by reading media data from the sinkpad, and then commencing
playback. Some decoders cannot be given data from a memory block, so the usual way of
reading all upstream data and passing it to <cite>load_from_buffer</cite> doesn’t work then. In this case,
set the value of loads_from_sinkpad to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>. This changes the way this class operates;
it does not require a sinkpad to exist anymore, and will call <cite>load_from_custom</cite> instead.
One example of a decoder where this makes sense is UADE (Unix Amiga Delitracker Emulator).
For some formats (such as TFMX), it needs to do the file loading by itself.
Since most decoders can read input data from a memory block, the default value of
loads_from_sinkpad is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>

    </section>

  </div> 

</body>
</html>